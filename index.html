<!DOCTYPE html>
<html lang="en">

<head>
    <meta author="Javier Díaz Neira">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIC BCN | BioEngineering - Fisiotherapy Project</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./style/style.css">
    <script type="importmap">{ "imports": { "three": "https://unpkg.com/three@0.162.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.162.0/examples/jsm/" } }</script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.umd.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="./js/imuVisualizer.js" type="module"></script>
    <script src="./js/dataRecorder.js"></script>
    <script src="./js/dataExporter.js"></script>
    <script src="./js/chartVisualizer.js"></script>
    <script src="./js/gattConnection.js"></script>
    <script src="./js/angleMeasurer.js"></script>
</head>
<body>
    <div class="app-frame">
        <div class="data-frame">
            <div class="data-section-frame blt-frame">
                <div class="data-section-title-frame">
                    <div class="data-section-title-container">
                        <div class="blt-request btn data-section-title-icon">
                            <svg class="blt-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2070 3333" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd">
                                <path d="M789 1064V0l1281 1012-702 643 702 661L778 3334l12-1123-544 532L0 2509l789-737v-263L5 
                                778l246-251 538 538zm344-352l363 305-363 292V712zm0 1304l363 305-363 292v-597z"/>
                            </svg>
                        </div>
                        <div class="data-section-title">Bluetooth ®</div>
                    </div>
                    <div class="data-section-title-aux blt-device-status">
                        <div class="blt-status-indicator blt-connection-status circle"></div>
                        <div class="blt-status-text blt-device-name"></div>
                    </div>
                </div>
                <div class="data-section-content-frame">
                    <div class="blt-status-container blt-server-status">
                        <div class="blt-status-indicator circle"></div>
                        <div class="blt-status-text"></div>
                    </div>
                    <div class="blt-status-container blt-services-status">
                        <div class="blt-status-indicator circle"></div>
                        <div class="blt-status-text"></div>
                    </div>
                    <div class="blt-status-container blt-characteristics-status">
                        <div class="blt-status-indicator circle"></div>
                        <div class="blt-status-text"></div>
                    </div>
                    <div class="blt-status-container blt-notification-status">
                        <div class="blt-status-indicator circle"></div>
                        <div class="blt-status-text"></div>
                    </div>
                </div>
            </div>
            <div class="data-section-frame recording-frame">
                <div class="data-section-title-frame">
                    <div class="data-section-title-container">
                        <div class="blt-start-recording btn data-section-title-icon">
                            <div class="recording-icon">
                                <div class="recording-icon-outer-circle circle"></div>
                                <div class="recording-icon-inner-circle"></div>
                            </div>
                        </div>
                        <div class="data-section-title recording-status-info"></div>
                    </div>
                    <div class="data-section-title-aux">
                        <div class="blt-recording-indicator circle"></div>
                        <div class="recording-timer">00:00</div>
                    </div>
                </div>
                <div class="data-section-content-frame">
                    <div class="blt-status-container">
                        <div class="recording-package-icon recieved-package-icon circle"></div>
                        <div class="recording-package-text">Recieved Packages: <span class="num-recieved-packages">0</span></div>
                    </div>
                    <div class="blt-status-container">
                        <div class="recording-package-icon waiting-package-icon circle"></div>
                        <div class="recording-package-text">Waiting Packages: <span class="num-waiting-packages">0</span></div>
                    </div>
                    <div class="blt-status-container">
                        <div class="recording-package-icon lost-package-icon circle"></div>
                        <div class="recording-package-text">Lost Packages: <span class="num-lost-packages">0</span></div>
                    </div>
                </div>
            </div>
            <div class="data-section-frame angle-measurement-frame">
                <div class="data-section-title-frame">
                    <div class="data-section-title-container">
                        <div class="blt-start-recording data-section-title-icon">
                            <svg class="recieved-data-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 483 483" >
                                <path d="M395.72,0c-48.204,0-87.281,39.078-87.281,87.281c0,2.036,0.164,4.03,0.309,6.029l-161.233,75.674
                                    c-15.668-14.971-36.852-24.215-60.231-24.215c-48.204,0.001-87.282,39.079-87.282,87.282c0,48.204,39.078,87.281,87.281,87.281
                                    c15.206,0,29.501-3.907,41.948-10.741l69.789,58.806c-3.056,8.896-4.789,18.396-4.789,28.322c0,48.204,39.078,87.281,87.281,87.281
                                    c48.205,0,87.281-39.078,87.281-87.281s-39.077-87.281-87.281-87.281c-15.205,0-29.5,3.908-41.949,10.74l-69.788-58.805
                                    c3.057-8.891,4.789-18.396,4.789-28.322c0-2.035-0.164-4.024-0.308-6.029l161.232-75.674c15.668,14.971,36.852,24.215,60.23,24.215
                                    c48.203,0,87.281-39.078,87.281-87.281C482.999,39.079,443.923,0,395.72,0z"/>
                            </svg>
                        </div>
                        <div class="data-section-title">Angle Measurement</div>
                    </div>
                    <div class="data-section-title-aux"></div>
                </div>
                <div class="data-section-content-frame">
                    <div class="angle-data-frame">
                        <div class="angle-data-title" translate="no">Pitch</div>
                        <div class="angle-visualizer-container pitch-angle-visualizer">
                            <svg class="angle-visualizer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                                <line class="vert-line angle-visualizer-bg-ui" x1="50" y1="0" x2="50" y2="100"></line>
                                <line class="horizontal-line angle-visualizer-bg-ui" x1="0" y1="50" x2="100" y2="50"></line>
                                <path class="pitch-angle-visualizer-path angle-visualizer-angle-path"></path>
                                <line class="pitch-angle-visualizer-first-angle angle-visualizer-first-angle" x1="50", y1="50" x2="50" y2="50"></line>
                                <line class="pitch-angle-visualizer-second-angle angle-visualizer-second-angle" x1="50" y1="50" x2="50" y2="50"></line>
                                <line class="pitch-angle-visualizer-current-angle angle-visualizer-current-angle" x1="50" y1="50" x2="50" y2="50"></line>
                            </svg>
                        </div>
                        <div class="angle-data-content-container">
                            <div class="angle-data-starting-angle">Starting Angle: <span class="pitch-starting-angle">0</span></div>
                            <div class="angle-data-ending-angle">Ending Angle: <span class="pitch-ending-angle">0</span></div>
                            <div class="angle-data-variance-angle">Variance: <span class="pitch-variance-angle">0</span></div>
                        </div>
                    </div>
                    <div class="angle-data-frame">
                        <div class="angle-data-title" translate="no">Roll</div>
                        <div class="angle-visualizer-container roll-angle-visualizer">
                            <svg class="angle-visualizer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                                <line class="vert-line angle-visualizer-bg-ui" x1="50" y1="0" x2="50" y2="100"></line>
                                <line class="horizontal-line angle-visualizer-bg-ui" x1="0" y1="50" x2="100" y2="50"></line>
                                <path class="roll-angle-visualizer-path angle-visualizer-angle-path"></path>
                                <line class="roll-angle-visualizer-first-angle angle-visualizer-first-angle" x1="50", y1="50" x2="50" y2="50"></line>
                                <line class="roll-angle-visualizer-second-angle angle-visualizer-second-angle" x1="50" y1="50" x2="50" y2="50"></line>
                                <line class="roll-angle-visualizer-current-angle angle-visualizer-current-angle" x1="50" y1="50" x2="50" y2="50"></line>
                            </svg>
                        </div>
                        <div class="angle-data-content-container">
                            <div class="angle-data-starting-angle">Starting Angle: <span class="roll-starting-angle">0</span></div>
                            <div class="angle-data-ending-angle">Ending Angle: <span class="roll-ending-angle">0</span></div>
                            <div class="angle-data-variance-angle">Variance: <span class="roll-variance-angle">0</span></div>
                        </div>
                    </div>
                    <div class="angle-data-frame">
                        <div class="angle-data-title" translate="no">Yaw</div>
                        <div class="angle-visualizer-container yaw-angle-visualizer">
                            <svg class="angle-visualizer yaw-angle-visualizer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                                <line class="vert-line angle-visualizer-bg-ui" x1="50" y1="0" x2="50" y2="100"></line>
                                <line class="horizontal-line angle-visualizer-bg-ui" x1="0" y1="50" x2="100" y2="50"></line>
                                <path class="yaw-angle-visualizer-path angle-visualizer-angle-path"></path>
                                <line class="yaw-angle-visualizer-first-angle angle-visualizer-first-angle" x1="50" y1="50" x2="50" y2="50"></line>
                                <line class="yaw-angle-visualizer-second-angle angle-visualizer-second-angle" x1="50" y1="50" x2="50" y2="50"></line>
                                <line class="yaw-angle-visualizer-current-angle angle-visualizer-current-angle" x1="50" y1="50" x2="50" y2="50"></line>
                            </svg>
                        </div>
                        <div class="angle-data-content-container">
                            <div class="angle-data-starting-angle">Starting Angle: <span class="yaw-starting-angle">0</span></div>
                            <div class="angle-data-ending-angle">Ending Angle: <span class="yaw-ending-angle">0</span></div>
                            <div class="angle-data-variance-angle">Variance: <span class="yaw-variance-angle">0</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="visualization-frame">
            <div class="data-section-frame IMU-visualizer-frame">
                <div class="data-section-title-frame">
                    <div class="data-section-title-container">
                        <div class="data-section-title">Real Time IMU Data 3D Visualization</div>
                    </div>
                    <div class="data-section-title-aux">
                        <div class="d3-set-center-btn btn">
                            <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 24 24">
                                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,
                                    1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,
                                    2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10Z" />
                            </svg>
                            <div>Set Center</div>
                        </div>
                    </div>
                </div>
                <div class="data-section-content-frame IMU-visualizer-container">
                    <canvas class="IMU-visualizer"></canvas>
                </div>
            </div>
            <div class="data-section-frame recording-chart-frame">
                <div class="data-section-title-frame">
                    <div class="data-section-title-container">
                        <div class="data-section-title">Recorded Data Chart Visualization</div>
                    </div>
                    <div class="data-section-title-aux data-export-btn-container">
                        <a class="send-modal-toggler btn">
                            <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M24 0l-6 22-8.129-7.239 7.802-8.234-10.458 7.227-7.215-1.754 24-12zm-15 16.668v7.332l3.258-4.431-3.258-2.901z"/>
                            </svg>
                            <!-- <div class="btn-description-text">Send Data</div> -->
                        </a>
                        <a class="download-data-btn btn">
                            <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 342.06">
                                <path d="M271.14 2.64c50.45 8.83 86.48 38.5 110.54 83.1l4.51-.45c18.95-1.39 38.61 1.62 56.18 8.84 34.63 14.2 55.57 42.42 64.44 77.79 6.76 26.89 7.34 56.62-.79 83.27-12.47 41.01-42.09 
                                    62.32-81.01 75.68l-.42.13c-8.15 2.76-16.46 5.06-24.56 6.93-39.29 6.93-249.08 3.73-296.18.56l-2.4-.26c-8.02-1.07-15.95-2.77-23.54-5.15-35.34-11.01-60.51-35.03-72.13-70.51-7.96-24.36-7.56-50.6.37-74.93 
                                    6.68-20.46 16.3-34.33 29.63-44.85 15.76-12.45 37.62-20.69 57.19-26.21C115.68 34.94 187.54-11.94 271.14 2.64zm55.11 186.93c5.19.22 8.87 1.94 11 5.17 5.77 8.66-2.11 17.21-7.58 23.23l-67.7 59.77c-5.8 
                                    6.41-14.06 6.41-19.86 0l-61.25-61.4c-5.11-5.77-11.43-13.62-6.12-21.6 2.19-3.23 5.83-4.95 11.01-5.17h34.9v-55.43c0-7.86 6.47-14.37 14.36-14.37h41.98c7.89 0 14.35 6.7 14.35 14.37v55.43h34.91z"/>
                            </svg>
                            <!-- <div class="btn-description-text">Download Data</div> -->
                        </a>
                    </div>
                </div>
                <div class="data-section-content-frame recording-chart-container">
                    <canvas class="recording-chart"></canvas>
                </div>
            </div>
        </div>
        <div class="modals-container">
            <div class="modal-backdrop">
                <div class="modal-frame">
                    <div class="modal-header">
                        <div class="modal-title">DATA SENDING FORM</div>
                        <div class="modal-subtitle">In other to send your data to the Phisiotherapist, we need to know who's the data comming from, please, fill this form before sending it!</div>
                    </div>
                    <div class="modal-content-container">
                        <form class="email-info-form">
                            <div class="modal-input-container mandatory-input">
                                <label for="email-full-name">Full Name</label>
                                <input class id="email-full-name" type="text" placeholder="Enter your full name...">
                            </div>
                            <div class="modal-input-container mandatory-input">
                                <label class="mandatory-input" for="email-dni">DNI or NIE</label>
                                <input class="mandatory-input"id="email-dni" class="num-homeless-input" type="text" placeholder="Enter your DNI or NIE...  ex: 12345678Z" >
                            </div>
                            <div class="modal-input-container optional-input">
                                <label for="email-comments" class="accesibility-not-visible">Comments to the Phisiotherapist</label>
                                <textarea id="email-comments" type="text" rows="5" spellcheck="true" placeholder="If you want to say something to your phisiotherapist, this is your moment..."></textarea>
                            </div>
                            <button class="send-email-btn" type="submit" ><span class="sending-indicator-container"><span class="sending-indicator circle"></span></span><span class="send-email-btn-text">Send Data</span></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>